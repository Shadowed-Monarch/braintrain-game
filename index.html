<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrainTrain Game</title>
    <style>
        @property --accent { syntax: '<color>'; initial-value: #ff0000; inherits: true; }
        :root[data-theme="dark"] { --bg: #050505; --card: #111; --text: #ffffff; --subtext: #666; --border: #333; }
        :root[data-theme="light"] { --bg: #f5f5f5; --card: #ffffff; --text: #000000; --subtext: #555; --border: #ddd; }
        @keyframes rainbow-loop { 0% { --accent: #ff0000; } 20% { --accent: #ffcc00; } 40% { --accent: #00ff00; } 60% { --accent: #00ffff; } 80% { --accent: #9900ff; } 100% { --accent: #ff0000; } }
        .rainbow-active { animation: rainbow-loop 5s infinite linear !important; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; transition: background 0.3s; }
        header { width: 100%; max-width: 1000px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
        .logo { font-size: 1.8rem; font-weight: 800; letter-spacing: 2px; }
        .logo span { color: var(--accent); }
        .stats-top { display: flex; gap: 20px; align-items: center; }
        .brain-count { color: #ff77ff; font-weight: bold; font-size: 1.2rem; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; width: 100%; max-width: 1000px; }
        .game-card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 30px; text-align: center; transition: 0.3s; text-decoration: none; color: inherit; position: relative; overflow: hidden; }
        .game-card:hover { border-color: var(--accent); transform: translateY(-5px); box-shadow: 0 10px 30px -10px var(--accent); }
        .game-card h3 { margin: 10px 0; font-size: 1.5rem; }
        .game-card p { color: var(--subtext); font-size: 0.9rem; margin-bottom: 20px; }
        .lvl-tag { position: absolute; top: 15px; right: 15px; font-size: 0.8rem; font-weight: bold; color: var(--accent); }
        .shop-section { margin-top: 60px; width: 100%; max-width: 1000px; }
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; margin-top: 20px; }
        .skin-item { aspect-ratio: 1; border-radius: 15px; border: 2px solid var(--border); cursor: pointer; display: flex; align-items: center; justify-content: center; flex-direction: column; font-size: 0.7rem; gap: 5px; transition: 0.2s; background: var(--card); }
        .skin-item.locked { opacity: 0.6; }
        .skin-item.active { border-color: var(--accent); transform: scale(1.05); }
        .swatch { width: 30px; height: 30px; border-radius: 50%; }
        #dev-console { display: none; position: fixed; bottom: 20px; background: #000; border: 1px solid #333; padding: 10px; border-radius: 10px; z-index: 100; }
        #dev-code { background: #000; color: #0f0; border: none; outline: none; font-family: monospace; }
        .mode-btn { background: var(--card); border: 1px solid var(--border); color: var(--text); padding: 8px 15px; border-radius: 20px; cursor: pointer; }
    </style>
</head>
<body>
    <header>
        <div class="logo">BRAIN<span>TRAIN</span></div>
        <div class="stats-top">
            <button class="mode-btn" onclick="toggleMode()">THEME</button>
            <a href="about.html" class="mode-btn" style="text-decoration: none;">ABOUT</a>
            <div class="brain-count" id="brain-clicker">üß† <span id="user-brains">0</span></div>
        </div>
    </header>

    <div class="grid">
        <a href="math.html" class="game-card">
            <div class="lvl-tag">LVL <span id="math-lvl">1</span></div>
            <div style="font-size: 3rem;">üî¢</div>
            <h3>Maths Train</h3>
            <p>Solve equations before the bubbles hit the floor.</p>
        </a>

        <a href="grammar.html" class="game-card">
            <div class="lvl-tag">LVL <span id="grammar-lvl">1</span></div>
            <div style="font-size: 3rem;">‚úçÔ∏è</div>
            <h3>Opposite Train</h3>
            <p>Type the opposite of words as they fall.</p>
        </a>

        <a href="dots.html" class="game-card">
            <div class="lvl-tag">LVL <span id="dots-lvl">1</span></div>
            <div style="font-size: 3rem;">üéØ</div>
            <h3>Dots Reflex</h3>
            <p>Tap the numbers in order as fast as you can.</p>
        </a>

        <a href="memory.html" class="game-card">
            <div class="lvl-tag">LVL <span id="memory-lvl">1</span></div>
            <div style="font-size: 3rem;">üß†</div>
            <h3>Memory Matrix</h3>
            <p>Remember the glowing blocks and tap them.</p>
        </a>
    </div>

    <div class="shop-section">
        <h2>SKIN SHOP</h2>
        <div class="shop-grid" id="skin-grid"></div>
    </div>

    <div id="dev-console">
        <input type="text" id="dev-code" placeholder="ENTER CODE...">
    </div>

    <script>
        const skins = [
            { id: 'red', color: '#ff0000', cost: 0 },
            { id: 'blue', color: '#0088ff', cost: 500 },
            { id: 'green', color: '#00ff00', cost: 1000 },
            { id: 'yellow', color: '#ffcc00', cost: 1500 },
            { id: 'cyan', color: '#00ffff', cost: 2000 },
            { id: 'pink', color: '#ff00ff', cost: 2500 },
            { id: 'purple', color: '#9900ff', cost: 3000 },
            { id: 'orange', color: '#ff6600', cost: 3500 },
            { id: 'gold', color: '#ffd700', cost: 5000 },
            { id: 'rainbow', color: 'linear-gradient(45deg, red, orange, yellow, green, blue, purple)', cost: 10000 }
        ];

        function updateUI() {
            const brains = localStorage.getItem('bt_coins') || 0;
            document.getElementById('user-brains').innerText = brains;
            document.getElementById('math-lvl').innerText = localStorage.getItem('bt_unlocked_math') || 1;
            document.getElementById('grammar-lvl').innerText = localStorage.getItem('bt_unlocked_grammar') || 1;
            document.getElementById('dots-lvl').innerText = localStorage.getItem('bt_unlocked_dots') || 1;
            document.getElementById('memory-lvl').innerText = localStorage.getItem('bt_unlocked_memory') || 1;
            
            const currentSkin = localStorage.getItem('bt_current_skin') || 'red';
            if(currentSkin === 'rainbow') {
                document.body.classList.add('rainbow-active');
            } else {
                document.body.classList.remove('rainbow-active');
                const colors = { red:'#ff0000', blue:'#0088ff', green:'#00ff00', yellow:'#ffcc00', cyan:'#00ffff', pink:'#ff00ff', purple:'#9900ff', orange:'#ff6600', gold:'#ffd700' };
                document.documentElement.style.setProperty('--accent', colors[currentSkin] || '#ff0000');
            }
            renderShop();
        }

        function toggleMode() {
            const current = localStorage.getItem('bt_mode') || 'dark';
            const next = current === 'dark' ? 'light' : 'dark';
            localStorage.setItem('bt_mode', next);
            document.documentElement.setAttribute('data-theme', next);
        }

        function renderShop() {
            const grid = document.getElementById('skin-grid');
            grid.innerHTML = '';
            const userBrains = parseInt(localStorage.getItem('bt_coins')) || 0;
            const currentSkin = localStorage.getItem('bt_current_skin') || 'red';
            const purchased = JSON.parse(localStorage.getItem('bt_skins_owned')) || ['red'];

            skins.forEach(s => {
                const el = document.createElement('div');
                el.className = `skin-item ${!purchased.includes(s.id) ? 'locked' : ''} ${currentSkin === s.id ? 'active' : ''}`;
                el.innerHTML = `
                    <div class="swatch" style="background: ${s.color}"></div>
                    <div>${s.id.toUpperCase()}</div>
                    <div>${purchased.includes(s.id) ? 'OWNED' : s.cost + ' üß†'}</div>
                `;
                el.onclick = () => {
                    if(purchased.includes(s.id)) {
                        localStorage.setItem('bt_current_skin', s.id);
                        updateUI();
                    } else if(userBrains >= s.cost) {
                        localStorage.setItem('bt_coins', userBrains - s.cost);
                        purchased.push(s.id);
                        localStorage.setItem('bt_skins_owned', JSON.stringify(purchased));
                        localStorage.setItem('bt_current_skin', s.id);
                        updateUI();
                    }
                };
                grid.appendChild(el);
            });
        }

        let clicks = 0;
        let timer;
        document.getElementById('brain-clicker').onclick = () => {
            clicks++;
            clearTimeout(timer);
            timer = setTimeout(() => clicks = 0, 1000);
            if(clicks === 5) {
                const dev = document.getElementById('dev-console');
                dev.style.display = dev.style.display === 'flex' ? 'none' : 'flex';
                clicks = 0;
            }
        };

        document.getElementById('dev-code').onkeypress = (e) => {
            if(e.key === 'Enter') {
                const val = e.target.value.toUpperCase();
                if(val === 'GODMODE') { localStorage.setItem('bt_coins', 99999); updateUI(); }
                if(val === 'RESET') { localStorage.clear(); location.reload(); }
                document.getElementById('dev-console').style.display = 'none';
            }
        };

        const initialMode = localStorage.getItem('bt_mode') || 'dark';
        document.documentElement.setAttribute('data-theme', initialMode);
        window.onload = updateUI;
    </script>
</body>
</html>
