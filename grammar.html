<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grammar</title>
    <style>
        :root { --bg: #000; --accent: #ff0000; --brain: #ff77ff; }
        body { font-family: sans-serif; background: var(--bg); color: #fff; margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; }
        header { width: 100%; padding: 10px 20px; display: flex; justify-content: space-between; border-bottom: 2px solid var(--accent); align-items: center; background: #050505; box-sizing: border-box; }
        .brain-wrap { display: flex; align-items: center; gap: 8px; color: var(--brain); font-weight: bold; }
        #game-container { position: relative; width: 95%; max-width: 800px; height: 350px; background: #080808; border: 2px solid var(--accent); border-radius: 15px; margin-top: 10px; overflow: hidden; }
        .train-car { position: absolute; background: var(--accent); padding: 15px 25px; border-radius: 10px; font-weight: bold; font-size: 1.2rem; box-shadow: 0 0 15px var(--accent); color: white; white-space: nowrap; }
        #ans { padding: 15px; width: 80%; max-width: 400px; margin-top: 20px; background: #111; border: 2px solid var(--accent); color: #fff; border-radius: 12px; font-size: 24px; text-align: center; outline: none; text-transform: uppercase; }
        #overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.95); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10; padding: 20px; }
        .level-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; max-height: 200px; overflow-y: auto; margin: 15px 0; padding: 10px; width: 100%; }
        .lvl-btn { padding: 10px; border: 2px solid #333; background: #111; color: #666; cursor: not-allowed; border-radius: 8px; font-weight: bold; border-style: solid; }
        .lvl-btn.unlocked { border-color: #555; color: #fff; cursor: pointer; }
        .lvl-btn.active { border-color: var(--accent); background: var(--accent); color: white; }
        .game-btn { padding: 15px 40px; background: var(--accent); border: none; color: white; border-radius: 30px; font-weight: bold; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>
    <header>
        <a href="index.html" style="color:white; text-decoration:none; border:1px solid #fff; padding:5px 12px; border-radius:5px; font-size: 0.8rem;">HOME</a>
        <div style="font-weight: bold; color: var(--accent);">LVL <span id="display-lvl">1</span></div>
        <div class="brain-wrap">ðŸ§  <span id="cur-brains">0</span></div>
    </header>

    <div id="game-container">
        <div id="overlay">
            <h2 id="m-title">GRAMMAR TRAIN</h2>
            <div class="level-grid" id="lvl-grid"></div>
            <button id="main-start-btn" class="game-btn" onclick="game.start()">START TRAINING</button>
            <div id="btn-container"></div>
        </div>
    </div>

    <input type="text" id="ans" placeholder="TYPE OPPOSITE..." autocomplete="off">
    <p style="color:#888; margin: 10px 0;">SOLVED: <span id="count" style="color:white">0</span>/10</p>

    <script>
        let selectedLvl = 1;
        class GrammarGame {
            constructor() {
                this.brains = parseInt(localStorage.getItem('bt_coins')) || 0;
                this.unlockedLvl = parseInt(localStorage.getItem('bt_unlocked_grammar')) || 1;
                
                this.wordBank = [
    {q:"EASY", a:["difficult", "tough", "arduous", "demanding", "challenging"]},
    {q:"BRIGHT", a:["dark", "dim", "dull", "gloomy", "obscure"]},
    {q:"HAPPY", a:["sad", "miserable", "depressed", "sorrowful", "melancholy"]},
    {q:"FAST", a:["slow", "sluggish", "leaden", "leisurely", "gradual"]},
    {q:"BIG", a:["small", "tiny", "minute", "petite", "microscopic"]},
    {q:"HOT", a:["cold", "chilly", "frigid", "freezing", "icy"]},
    {q:"STRONG", a:["weak", "feeble", "fragile", "frail", "puny"]},
    {q:"RICH", a:["poor", "impoverished", "needy", "destitute", "penniless"]},
    {q:"CLEAN", a:["dirty", "filthy", "grimy", "soiled", "polluted"]},
    {q:"BRAVE", a:["cowardly", "fearful", "timid", "craven", "meek"]},
    {q:"QUIET", a:["loud", "noisy", "deafening", "rowdy", "boisterous"]},
    {q:"NEW", a:["old", "ancient", "antique", "dated", "obsolete"]},
    {q:"SMOOTH", a:["rough", "bumpy", "coarse", "rugged", "uneven"]},
    {q:"SHARP", a:["dull", "blunt", "rounded", "flat", "obtuse"]},
    {q:"DEEP", a:["shallow", "superficial", "slight", "surface-level", "flat"]},
    {q:"TRUE", a:["false", "fake", "incorrect", "erroneous", "mendacious"]},
    {q:"WIDE", a:["narrow", "thin", "slender", "tight", "constricted"]},
    {q:"FULL", a:["empty", "vacant", "void", "hollow", "depleted"]},
    {q:"SMART", a:["stupid", "ignorant", "unintelligent", "foolish", "simple-minded"]},
    {q:"KIND", a:["cruel", "mean", "malicious", "heartless", "callous"]},
    {q:"HIGH", a:["low", "deep", "short", "sunken", "bottom"]},
    {q:"YOUNG", a:["old", "aged", "elderly", "ancient", "mature"]},
    {q:"LOVE", a:["hate", "hatred", "abhorrence", "loathing", "detestation"]},
    {q:"VICTORY", a:["defeat", "loss", "failure", "beating", "rout"]},
    {q:"THICK", a:["thin", "slender", "slim", "fine", "narrow"]},
    {q:"FIRST", a:["last", "final", "ending", "ultimate", "concluding"]},
    {q:"CHEAP", a:["expensive", "costly", "pricey", "valuable", "extravagant"]},
    {q:"BEAUTIFUL", a:["ugly", "hideous", "unattractive", "grotesque", "revolting"]},
    {q:"SWEET", a:["sour", "bitter", "salty", "acidic", "tart"]},
    {q:"HEALTHY", a:["sick", "ill", "unwell", "ailing", "diseased"]},
    {q:"SAFE", a:["dangerous", "risky", "perilous", "unsafe", "hazardous"]},
    {q:"HEAVY", a:["light", "weightless", "airy", "buoyant", "flimsy"]},
    {q:"SUCCESS", a:["failure", "disaster", "flop", "fiasco", "defeat"]},
    {q:"START", a:["stop", "finish", "end", "cease", "conclude"]},
    {q:"ALIVE", a:["dead", "deceased", "lifeless", "departed", "extinct"]},
    {q:"DRY", a:["wet", "damp", "moist", "soggy", "soaked"]},
    {q:"ACTIVE", a:["passive", "idle", "lazy", "inactive", "dormant"]},
    {q:"ABOVE", a:["below", "under", "beneath", "underneath", "lower"]},
    {q:"GENTLE", a:["rough", "harsh", "violent", "brutal", "fierce"]},
    {q:"FRIENDLY", a:["hostile", "cold", "unfriendly", "aloof", "antagonistic"]},
    {q:"TIGHT", a:["loose", "slack", "baggy", "limp", "relaxed"]},
    {q:"WIN", a:["lose", "fail", "surrender", "yield", "forfeit"]},
    {q:"PEACE", a:["war", "conflict", "strife", "chaos", "turmoil"]},
    {q:"BEST", a:["worst", "least", "poorest", "lowest", "meanest"]},
    {q:"WISE", a:["foolish", "naive", "unwise", "silly", "gullible"]},
    {q:"HARD", a:["soft", "squishy", "tender", "flexible", "pliant"]},
    {q:"SIMPLE", a:["complex", "intricate", "complicated", "elaborate", "ornate"]},
    {q:"OPEN", a:["closed", "shut", "sealed", "blocked", "locked"]},
    {q:"NEAR", a:["far", "distant", "remote", "away", "yonder"]},
    {q:"EARLY", a:["late", "delayed", "tardy", "belated", "overdue"]},
    {q:"GAIN", a:["loss", "reduction", "decline", "decrease", "depletion"]},
    {q:"BITTER", a:["sweet", "sugary", "honeyed", "pleasant", "mild"]},
    {q:"CAREFUL", a:["careless", "reckless", "negligent", "heedless", "rash"]},
    {q:"LAUGH", a:["cry", "weep", "sob", "mourn", "grieve"]},
    {q:"TAME", a:["wild", "feral", "untamed", "savage", "fierce"]},
    {q:"TRUE", a:["false", "wrong", "untrue", "spurious", "bogus"]},
    {q:"MODERN", a:["ancient", "antique", "old-fashioned", "archaic", "traditional"]},
    {q:"PUBLIC", a:["private", "secret", "confidential", "personal", "hidden"]},
    {q:"EMPTY", a:["full", "occupied", "crowded", "packed", "brimming"]},
    {q:"DIRECT", a:["indirect", "roundabout", "meandering", "deviating", "crooked"]},
    {q:"GIANT", a:["tiny", "dwarf", "midget", "small", "miniature"]},
    {q:"LEAD", a:["follow", "trail", "accompany", "obey", "subordinate"]},
    {q:"POLITE", a:["rude", "impolite", "boorish", "discourteous", "insulting"]},
    {q:"ACCEPT", a:["reject", "refuse", "decline", "deny", "spurn"]},
    {q:"CREATE", a:["destroy", "demolish", "ruin", "dismantle", "annihilate"]},
    {q:"FAIR", a:["unfair", "biased", "unjust", "partial", "prejudiced"]},
    {q:"HUMBLE", a:["proud", "arrogant", "vain", "haughty", "conceited"]},
    {q:"INNER", a:["outer", "exterior", "external", "outward", "surface"]},
    {q:"ALWAYS", a:["never", "rarely", "seldom", "occasionally", "infrequently"]},
    {q:"BORROW", a:["lend", "return", "provide", "grant", "give"]},
    {q:"BUILD", a:["demolish", "raze", "destroy", "break", "wreck"]},
    {q:"CERTAIN", a:["uncertain", "doubtful", "unsure", "hesitant", "ambiguous"]},
    {q:"CHEERFUL", a:["gloomy", "sad", "grumpy", "morose", "somber"]},
    {q:"DELICIOUS", a:["distasteful", "yucky", "repulsive", "bland", "unpalatable"]},
    {q:"EQUAL", a:["unequal", "different", "uneven", "disproportionate", "varied"]},
    {q:"FAMOUS", a:["unknown", "anonymous", "obscure", "unheard-of", "inglorious"]},
    {q:"FERTILE", a:["barren", "sterile", "infertile", "arid", "unproductive"]},
    {q:"GENERAL", a:["specific", "particular", "unique", "limited", "special"]},
    {q:"HOPE", a:["despair", "doubt", "pessimism", "despondency", "hopelessness"]},
    {q:"JOIN", a:["separate", "divide", "detach", "disconnect", "sever"]},
    {q:"KNOWLEDGE", a:["ignorance", "illiteracy", "unfamiliarity", "confusion", "inexperience"]},
    {q:"LITERAL", a:["figurative", "metaphorical", "symbolic", "abstract", "allegorical"]},
    {q:"MAJORITY", a:["minority", "handful", "few", "fraction", "scarcity"]},
    {q:"NATURAL", a:["artificial", "man-made", "synthetic", "unnatural", "affected"]},
    {q:"NORMAL", a:["abnormal", "weird", "strange", "unusual", "eccentric"]},
    {q:"OBEY", a:["disobey", "defy", "rebel", "resist", "transgress"]},
    {q:"PATIENCE", a:["impatience", "eagerness", "irritation", "restlessness", "haste"]},
    {q:"PERMANENT", a:["temporary", "brief", "fleeting", "transient", "ephemeral"]},
    {q:"PLENTY", a:["scarcity", "lack", "dearth", "shortage", "insufficiency"]},
    {q:"PRAISE", a:["criticize", "condemn", "scold", "blame", "reprimand"]},
    {q:"QUICK", a:["slow", "lethargic", "deliberate", "leisurely", "sluggish"]},
    {q:"REAL", a:["fake", "imaginary", "fictional", "artificial", "false"]},
    {q:"REMEMBER", a:["forget", "overlook", "neglect", "ignore", "dismiss"]},
    {q:"ROUGH", a:["smooth", "silky", "level", "polished", "even"]},
    {q:"SOBER", a:["drunk", "intoxicated", "inebriated", "tipsy", "wasted"]},
    {q:"SOLID", a:["liquid", "gas", "hollow", "soft", "fragile"]},
    {q:"TIDY", a:["messy", "untidy", "cluttered", "chaotic", "sloppy"]},
    {q:"UNIQUE", a:["common", "ordinary", "usual", "typical", "standard"]},
    {q:"UNITY", a:["division", "discord", "separation", "disunity", "conflict"]},
    {q:"VERTICAL", a:["horizontal", "flat", "level", "recumbent", "prone"]}
                ];
                
                this.isPlaying = false;
                this.applyTheme();
                this.initMenu();
                this.updateUI();
            }

            applyTheme() {
                const skinID = localStorage.getItem('bt_current_skin') || 'red';
                const colors = { red:'#ff0000', blue:'#0088ff', yellow:'#ffcc00', green:'#00ff00', purple:'#9900ff' };
                document.documentElement.style.setProperty('--accent', colors[skinID] || '#ff0000');
            }

            updateUI() {
                document.getElementById('cur-brains').innerText = this.brains;
                document.getElementById('display-lvl').innerText = selectedLvl;
            }

            initMenu() {
                const grid = document.getElementById('lvl-grid');
                grid.innerHTML = '';
                document.getElementById('btn-container').innerHTML = '';
                document.getElementById('main-start-btn').style.display = 'block';
                
                this.unlockedLvl = parseInt(localStorage.getItem('bt_unlocked_grammar')) || 1;

                for (let i = 1; i <= 100; i++) {
                    const btn = document.createElement('button');
                    btn.innerText = i;
                    btn.className = 'lvl-btn';
                    
                    if (i <= this.unlockedLvl) {
                        btn.classList.add('unlocked');
                        btn.onclick = () => { 
                            selectedLvl = i; 
                            this.initMenu(); 
                            this.updateUI(); 
                        };
                    }
                    
                    if (i === selectedLvl) {
                        btn.classList.add('active');
                    }
                    
                    grid.appendChild(btn);
                }
            }

            start() {
                this.isPlaying = true;
                this.solved = 0;
                this.active = null;
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('count').innerText = "0";
                document.getElementById('ans').value = "";
                document.getElementById('ans').focus();
                this.spawn();
                this.loop();
            }

            spawn() {
                if (!this.isPlaying) return;
                if (this.solved >= 10) return this.end(true);
                
                const word = this.wordBank[Math.floor(Math.random() * this.wordBank.length)];
                
                if(this.active) this.active.el.remove();
                
                const el = document.createElement('div');
                el.className = 'train-car';
                el.innerText = word.q;
                el.style.top = "150px";
                el.style.left = "-200px";
                document.getElementById('game-container').appendChild(el);
                
                const speed = 1.5 + (selectedLvl * 0.15);
                this.active = { el, x: -200, s: speed, ans: word.a };
            }

            loop() {
                if(!this.isPlaying) return;
                if(this.active) {
                    this.active.x += this.active.s;
                    this.active.el.style.left = this.active.x + "px";
                    
                    if(this.active.x > 850) {
                        this.end(false);
                    }
                }
                requestAnimationFrame(() => this.loop());
            }

            end(win) {
                this.isPlaying = false;
                if(this.active) this.active.el.remove();
                
                const overlay = document.getElementById('overlay');
                overlay.style.display = 'flex';
                document.getElementById('main-start-btn').style.display = 'none';
                
                const btnContainer = document.getElementById('btn-container');
                btnContainer.innerHTML = '';

                if(win) {

                    const reward = selectedLvl * 5;
                    this.brains += reward;
                    localStorage.setItem('bt_coins', this.brains);


                if (selectedLvl === this.unlockedLvl && this.unlockedLvl < 100) {
                        this.unlockedLvl++;
                        localStorage.setItem('bt_unlocked_grammar', this.unlockedLvl);
                    }
                    
                    document.getElementById('m-title').innerText = "LEVEL CLEAR!";
                    const nextBtn = document.createElement('button');
                    nextBtn.className = 'game-btn';
                    nextBtn.innerText = "NEXT LEVEL";
                    nextBtn.onclick = () => { 
                        selectedLvl++; 
                        this.initMenu(); 
                        this.updateUI(); 
                        this.start(); 
                    };
                    btnContainer.appendChild(nextBtn);
                } else {
                    document.getElementById('m-title').innerText = "TRAIN CRASHED!";
                    const retryBtn = document.createElement('button');
                    retryBtn.className = 'game-btn';
                    retryBtn.innerText = "PLAY AGAIN";
                    retryBtn.onclick = () => this.start();
                    btnContainer.appendChild(retryBtn);
                }
                this.updateUI();
            }
        }

        const game = new GrammarGame();

        document.getElementById('ans').addEventListener('input', (e) => {
            if(game.isPlaying && game.active) {
                const val = e.target.value.toUpperCase().trim();
                if(game.active.ans.includes(val)) {
                    game.active.el.remove();
                    game.active = null;
                    game.solved++;
                    document.getElementById('count').innerText = game.solved;
                    document.getElementById('ans').value = "";
                    game.spawn();
                }
            }
        });
    </script>
</body>
</html>
